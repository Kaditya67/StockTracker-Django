{% extends "base.html" %}
{% block title %} Watchlist {% endblock %}

{% block content %}
    <h1 class="text-center">Watchlist</h1>
    <div class="container">
        <div class="table-responsive">
            <table id="watchlist-body" class="table table-striped table-bordered">
                <thead class="thead-dark">
                    <tr>
                        <th style="text-align:center">Date</th>
                        <th style="text-align:center">Symbol</th>
                        <th style="text-align:center">Closing price</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Table rows will be dynamically added here -->
                </tbody>
            </table>
        </div>
    </div>
    <script>
        window.addEventListener("message", function(event) {
            if (event.data.action === "updateWatchlist") {
                var data = event.data.data;
                var tableRow =
                    "<tr><td>" +
                    data.date +
                    "</td><td>" +
                    data.symbol +
                    "</td><td>" +
                    data.closing_price +
                    "</td></tr>";
                $("#watchlist-body").append(tableRow);
            }
        });
    </script>
{% endblock %}
